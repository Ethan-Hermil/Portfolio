<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<title>Ethan Hermil's portfolio</title>
	<link rel="stylesheet" href="portfolio.css">
	<link rel="shortcut icon" href="img/favicon.png">
</head>

<body>
	<header>
		<aside>
			<img src="img/user.jpg" alt="User">
			<div>
				<h2>Ethan Hermil</h2>
				<p>Etudiant en 2<sup>ème</sup> année de BUT informatique</p>
			</div>

		</aside>
		<nav>
			<a class="navBtn" id="indexBtn">Accueil</a>
			<a class="navBtn" id="projetsBtn">Mes Projets</a>
			<a class="navBtn" id="parcoursBtn">Parcours</a>
		
			<script>
				const elements = document.getElementsByClassName('navBtn');

				for (let i = 0; i < elements.length; i++) {
					elements[i].addEventListener('animationend', function(e) {
						elements[i].classList.remove('blink');
						elements[i].classList.remove('fly');
					});

					elements[i].addEventListener('mouseover', function(e) {
						elements[i].classList.add('blink')
					});

					elements[i].addEventListener('click', function(e) {
						elements[i].classList.add('fly')
					});
				}
			</script>
		
		</nav>
	</header>


	<main>
		<section id="index">
			<h1>Main</h1>
			<!-- Section remplie au chargement de la page -->
		</section>


		<section id="projets">
			<h1>Mes Projets</h1>
			<!-- Section remplie au chargement de la page -->
		</section>


		<section id="parcours">
			<h1>Mon parcours</h1>
			<!-- Section remplie au chargement de la page -->
		</section>
	</main>


	<footer>
		<h4>Me contacter</h4>
		<div class="contact">
			<div class="flex-row">
				<div>
					<p>Mail:</p>
				</div>
				<div>
					<p>Ethan.Hermil@etu.univ-grenoble-alpes.fr</p>
				</div>
			</div>
			<div class="flex-row">
				<div>
					<p>Téléphone:</p>
				</div>
				<div>
					<p>06 47 88 66 45</p>
				</div>
			</div>
		</div>
	</footer>
</body>

<script>

	let index = document.querySelector("section#index");
	let projets = document.querySelector("section#projets");
	let parcours = document.querySelector("section#parcours");

	function afficherIndex() {
		projets.style.display = "none";
		parcours.style.display = "none";
		index.style.display = "block";
	}

	function afficherProjets() {
		index.style.display = "none";
		parcours.style.display = "none";
		projets.style.display = "block";
	}

	function afficherParcours() {
		index.style.display = "none";
		projets.style.display = "none";
		parcours.style.display = "block";
	}

	document.querySelector("#parcoursBtn").addEventListener('click', afficherParcours);
	document.querySelector("#projetsBtn").addEventListener('click', afficherProjets);
	document.querySelector("#indexBtn").addEventListener('click', afficherIndex);


	function initPages(file) {
		let indexBox = document.querySelector('#index');
		let projetsBox = document.querySelector('#projets');
		let parcoursBox = document.querySelector('#parcours');

		let fileIndex = file.index;
		//boucle pour les grandes sections
		fileIndex.forEach(element => {
			//Titre de la section
			let h2 = document.createElement('h2');
			h2.textContent = element.name;
			indexBox.appendChild(h2);

			let divBox = document.createElement('div');
			divBox.setAttribute('class', 'box');
			indexBox.appendChild(divBox);

			//boucle pour tous les textes de la section
			element.list.forEach(text => {
				let p = document.createElement('p');
				p.innerHTML = text.text;
				divBox.appendChild(p);
			});
		});



		let id = 1;
		let fileProjects = file.projects;
		//boucle pour les grandes catégories
		fileProjects.forEach(element => {
			//Titre de la catégorie
			let h2 = document.createElement('h2');
			h2.textContent = element.name;
			projetsBox.appendChild(h2);

			let divBox = document.createElement('div');
			divBox.setAttribute('class', 'box');
			projetsBox.appendChild(divBox);

			//boucle pour chaque projet de la catégorie
			element.list.forEach(projet => {
				//la section contenant le projet
				let section = document.createElement('section');
				section.setAttribute('class', 'projet');
				divBox.appendChild(section);

				//checkbox invisible pour dérouler
				let checkbox = document.createElement('input');
				checkbox.setAttribute('type', 'checkbox');
				checkbox.setAttribute('id', id);
				checkbox.setAttribute('class', 'check');
				section.appendChild(checkbox);

				//boutton visible pour dérouler
				let label = document.createElement('label');
				label.setAttribute('for', id);
				label.setAttribute('class', 'button');
				section.appendChild(label);
				//ne pas oublier d'incrémenter l'id
				id++;

				//titre du projet
				let h3 = document.createElement('h3');
				h3.textContent = projet.title;
				section.appendChild(h3);

				//barre horizontale
				let hr = document.createElement('hr');
				section.appendChild(hr);

				//div contenant date, texte, btns
				let divContent = document.createElement('div');
				divContent.setAttribute('class', 'projectContent')
				section.appendChild(divContent);

				//date
				let h4 = document.createElement('h4');
				h4.textContent = "(" + projet.start + " - " + projet.end + ")";
				divContent.appendChild(h4);

				//texte
				let desc = document.createElement('p');
				desc.textContent = projet.description;
				divContent.appendChild(desc);

				let role = document.createElement('p');
				role.textContent = projet.role;
				divContent.appendChild(role);

				let bilan = document.createElement('p');
				bilan.textContent = projet.bilan;
				divContent.appendChild(bilan);

				//btns
				projet.links.forEach(btn => {
					let button = document.createElement('a');
					button.setAttribute('target', '_blank');
					button.setAttribute('href', btn.target);
					button.setAttribute('class', 'projectButton');
					button.textContent = btn.content;
					divContent.appendChild(button);
				});
			});
		});

		let fileParcours = file.parcours;
		//boucle pour les grandes sections
		fileParcours.forEach(element => {
			//Titre de la section
			let h2 = document.createElement('h2');
			h2.textContent = element.name;
			parcoursBox.appendChild(h2);

			let divBox = document.createElement('div');
			divBox.setAttribute('class', 'box');
			parcoursBox.appendChild(divBox);

			//boucle pour tous les textes de la section
			element.list.forEach(list => {
				if (list.start != null && list.end != null) {
					let h3 = document.createElement('h3');
					h3.textContent = "( " + list.start + " - " + list.end + " )";
					divBox.appendChild(h3);
				}

				list.texts.forEach(text => {
					let p = document.createElement('p');
					p.innerHTML = text.text;
					divBox.appendChild(p);
				});
			});
		});

	}


	
	fetch('Content.json').then((response) => response.json()).then((json) => initPages(json));

	
	
</script>

</html>